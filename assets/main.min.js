(function () {/*
 ellipsis-title.js

 LICENSE: http://hail2u.mit-license.org/2016
 reldate.js

 LICENSE: http://hail2u.mit-license.org/2016
 site-search-focus.js

 LICENSE: http://hail2u.mit-license.org/2017
 unutm.js

 LICENSE: http://hail2u.mit-license.org/2013
 */
    var d = "function" == typeof Object.defineProperties ? Object.defineProperty : function (a, b, c) {
            if (c.get || c.set)throw new TypeError("ES3 does not support getters and setters.");
            a != Array.prototype && a != Object.prototype && (a[b] = c.value)
        }, f = "undefined" != typeof window && window === this ? this : "undefined" != typeof global && null != global ? global : this;

    function h() {
        h = function () {
        };
        f.Symbol || (f.Symbol = k)
    }

    var l = 0;

    function k(a) {
        return "jscomp_symbol_" + (a || "") + l++
    }

    function m() {
        h();
        var a = f.Symbol.iterator;
        a || (a = f.Symbol.iterator = f.Symbol("iterator"));
        "function" != typeof Array.prototype[a] && d(Array.prototype, a, {
            configurable: !0,
            writable: !0,
            value: function () {
                return n(this)
            }
        });
        m = function () {
        }
    }

    function n(a) {
        var b = 0;
        return p(function () {
            return b < a.length ? {done: !1, value: a[b++]} : {done: !0}
        })
    }

    function p(a) {
        m();
        a = {next: a};
        a[f.Symbol.iterator] = function () {
            return this
        };
        return a
    }

    function q(a) {
        m();
        var b = a[Symbol.iterator];
        return b ? b.call(a) : n(a)
    }

    function r(a, b) {
        if (b) {
            var c = f;
            a = a.split(".");
            for (var e = 0; e < a.length - 1; e++) {
                var g = a[e];
                g in c || (c[g] = {});
                c = c[g]
            }
            a = a[a.length - 1];
            e = c[a];
            b = b(e);
            b != e && null != b && d(c, a, {configurable: !0, writable: !0, value: b})
        }
    }

    r("Number.isFinite", function (a) {
        return a ? a : function (a) {
                return "number" !== typeof a ? !1 : !isNaN(a) && Infinity !== a && -Infinity !== a
            }
    });
    r("Number.isInteger", function (a) {
        return a ? a : function (a) {
                return Number.isFinite(a) ? a === Math.floor(a) : !1
            }
    });
    for (var t = q(document.querySelectorAll("*")), u = t.next(); !u.done; u = t.next()) {
        var v = u.value;
        "ellipsis" === window.getComputedStyle(v)["text-overflow"] && (v.title = v.textContent)
    }
    "use strict";
    var w = performance.timing.navigationStart + performance.now();

    function x() {
        var a = Date.parse(y);
        if (Number.isInteger(a) && (a = parseInt((w - a) / 1E3, 10), Number.isInteger(a) && !(0 > a))) {
            if (30 > a)return "刚发布";
            if (90 > a)return a + "秒前";
            a = parseInt(a / 60, 10);
            if (90 > a)return a + "分前";
            a = parseInt(a / 60, 10);
            if (36 > a)return a + "时前";
            a = parseInt(a / 24, 10);
            if (45 > a)return a + "天前";
            a = parseInt(a / 30, 10);
            return 18 > a ? a + "月前" : parseInt(a / 12, 10) + "年前"
        }
    }

    for (var z = q(document.querySelectorAll("time.js-reldate[datetime]")), A = z.next(); !A.done; A = z.next()) {
        var B = A.value, y = B.getAttribute("datetime"), C = x();
        C && (B.setAttribute("title", y), B.textContent = C)
    }
    "use strict";
    function D() {
        document.getElementById("site_search").focus()
    }

    document.getElementById("site_search_icon").addEventListener("click", D, !1);
    window.addEventListener("hashchange", function () {
        "#site_search" === location.hash && D()
    }, !1);
    "use strict";
    location.search && history.replaceState(null, "", "" + location.pathname + location.search.replace(/[?&]utm_[^&]+/g, "").replace(/^&/, "?") + location.hash);
}).call(window);